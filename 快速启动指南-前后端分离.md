# 🚀 快速启动指南（前后端分离版）

## 当前架构说明

### ❌ 之前的错误做法：
- 所有页面都在 `studyroom-java` 后端项目中
- 访问 http://localhost:9999/self-study/ 显示的是后端提供的 HTML
- **这不是前后端分离！**

### ✅ 现在的正确做法：
```
前端 (Vue)              后端 (Java)
localhost:8001    ←→    localhost:9999
  提供界面                提供数据API
```

---

## 📋 启动步骤

### 步骤 1：启动后端

**方法 A：使用批处理文件（最简单，推荐）**
```
双击：启动Java后端.bat
```

**方法 B：使用 IDEA**
1. 打开 `studyroom-java` 项目
2. 找到 `src/main/java/com/selfstudy/Application.java`
3. 右键点击 -> Run 'Application.main()'
4. 看到 "Started Application" 即成功

**方法 C：使用命令行**
```bash
# 注意：cd 和 mvn 之间需要换行或使用 &&
cd studyroom-java
mvn spring-boot:run

# 或者一行命令（使用 &&）
cd studyroom-java && mvn spring-boot:run
```

**⚠️ 常见错误：**
```bash
# ❌ 错误写法（缺少空格或换行）
cd studyroom-javamvn spring-boot:run

# ✅ 正确写法（分两行）
cd studyroom-java
mvn spring-boot:run

# ✅ 正确写法（使用 &&）
cd studyroom-java && mvn spring-boot:run
```

**验证后端启动成功：**
```
✅ http://localhost:9999/self-study/health
```
返回 JSON 数据即成功。

---

### 步骤 2：启动前端

**方法 A：双击批处理文件（推荐）**
```
双击：启动Vue前端.bat
```

**方法 B：使用命令行**
```bash
cd studyroom-vue

# 首次运行需要安装依赖
npm install

# 启动开发服务器
npm run dev
```

**验证前端启动成功：**
```
✅ http://localhost:8001
```
应该看到 Vue 管理后台登录页面。

---

## 🎯 访问地址

### 前端界面（用户访问）
```
✅ http://localhost:8001
```
- 这是 **Vue 前端页面**
- 用户通过这个地址访问系统
- 这里有登录页面、管理后台等

### 后端 API（前端调用）
```
✅ http://localhost:9999/self-study
```
- 这是 **后端 RESTful API**
- 只返回 JSON 数据，不返回 HTML
- 前端通过 AJAX 调用这些接口

### 开发文档
```
Swagger: http://localhost:9999/self-study/swagger-ui.html
Druid:   http://localhost:9999/self-study/druid/
```

---

## 🔍 如何验证前后端分离成功？

### 测试 1：访问前端
```
打开浏览器访问：http://localhost:8001
```
**预期结果：** 看到 Vue 登录页面或管理后台

### 测试 2：检查 API 调用
```
1. 按 F12 打开浏览器开发者工具
2. 切换到 Network 标签
3. 在前端页面进行操作（如登录）
4. 观察网络请求
```
**预期结果：** 看到请求发往 `/proxyApi/xxx`，代理到 `http://localhost:9999/self-study/xxx`

### 测试 3：直接调用后端 API
```
访问：http://localhost:9999/self-study/health
```
**预期结果：** 返回 JSON 数据，不是 HTML 页面

---

## 📱 微信小程序配置

微信小程序需要配置后端 API 地址：

编辑 `studyroom-wx/utils/httpRequest.js` 或配置文件：
```javascript
const baseURL = 'http://localhost:9999/self-study';
```

---

## ⚙️ 配置说明

### 已完成的配置：

✅ **后端 CORS 配置**
- 文件：`studyroom-java/src/main/java/com/selfstudy/config/CorsConfig.java`
- 允许前端 8001 端口跨域访问

✅ **前端代理配置**
- 文件：`studyroom-vue/config/index.js`
- 代理配置：`/proxyApi` → `http://localhost:9999/self-study`

✅ **API 地址配置**
- 前端通过代理访问后端 API
- 生产环境需要修改为实际域名

---

## 🐛 常见问题

### Q1: 前端启动失败，提示 "npm: command not found"
**A:** 需要安装 Node.js
```bash
# 下载安装 Node.js (推荐 LTS 版本)
https://nodejs.org/

# 验证安装
node -v
npm -v
```

### Q2: 前端能访问，但调用后端 API 失败
**A:** 检查以下几点：
1. 后端是否已启动（9999 端口）
2. 浏览器控制台是否有 CORS 错误
3. 代理配置是否正确

### Q3: 访问 http://localhost:8001 显示空白页
**A:** 
1. 检查浏览器控制台是否有错误
2. 确认 `npm run dev` 没有报错
3. 尝试清除浏览器缓存

### Q4: 如何修改前端端口？
**A:** 编辑 `studyroom-vue/config/index.js`
```javascript
port: 8001,  // 改为其他端口
```

---

## 📦 生产环境部署

### 前端打包
```bash
cd studyroom-vue
npm run build
```
打包后的文件在 `dist/` 目录

### 后端打包
```bash
cd studyroom-java
mvn clean package
```
打包后的 jar 文件在 `target/` 目录

### Nginx 配置
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    # 前端静态文件
    location / {
        root /path/to/studyroom-vue/dist;
        try_files $uri $uri/ /index.html;
    }
    
    # 后端 API 代理
    location /self-study/ {
        proxy_pass http://localhost:9999;
    }
}
```

---

## ✅ 检查清单

启动前确认：
- [ ] MySQL 数据库已启动
- [ ] 数据库 `study-room` 已创建
- [ ] 执行了 `db.sql` 初始化数据
- [ ] Node.js 已安装（前端需要）
- [ ] JDK 1.8 已安装（后端需要）

启动后确认：
- [ ] 后端运行在 9999 端口
- [ ] 前端运行在 8001 端口
- [ ] 访问前端地址显示 Vue 页面
- [ ] 前端可以正常调用后端 API
- [ ] 浏览器控制台无错误

---

## 🎉 总结

### 前后端分离的优势：
1. **前后端独立开发**：互不干扰
2. **技术栈分离**：前端用 Vue，后端用 Spring Boot
3. **部署灵活**：可以部署在不同服务器
4. **性能优化**：前端可以使用 CDN
5. **团队协作**：前后端工程师各司其职

### 现在的工作流程：
```
1. 后端开发人员：
   - 开发 REST API
   - 提供接口文档（Swagger）
   - 部署后端服务

2. 前端开发人员：
   - 开发 Vue 页面
   - 调用后端 API
   - 部署前端静态文件

3. 联调测试：
   - 前端通过代理调用后端 API
   - 发现问题及时沟通修复
```

---

**现在可以双击 `启动Vue前端.bat` 启动前端项目了！** 🚀

**默认账号：** admin / admin

